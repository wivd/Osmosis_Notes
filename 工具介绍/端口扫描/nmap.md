# Nmap

nmap的参数比较多，但是通常用的只有一部分命令，下面我从网上下载了一张nmap的中文介绍图



![](http://ww1.sinaimg.cn/large/007bHQE8gy1g59vctfg3xj311k7f5x6p.jpg)

## nmap常用命令介绍

1.扫描多个目标地址

适用于:目标在`同一网段`和`不同网段`但不连续且数量不多

`namp 192.168.0.2 192.168.1.2`

2.扫描一个范围内的目标地址

适用于：指定扫描一个连续的网段，

`nmap 192.168.0.100-200`

3.扫描目标地址所在的某个网段

`nmap 192.168.0.1/24 `或 `nmap 192.168.0.100/24`

`nmap 192.168.0.1/24>cs.txt`

`cat 1.txt | grep 192.168|cut -c 22-45`

4.扫描主机列表test.txt 中的所有目标地址

扫描test.txt中的地址或者网段，此处导入的是觉对路径

`nmap -iL c:\users\Aerfa\Desktop\test.txt`

5.扫描除某一个目标地址之外的所有目标地址

`nmap 192.168.0.100/24 -exclude 192.168.0.105 `  //扫描除192.168.0.105的其它地址。

6.扫描除某一文件中的目标地址之外的目标地址

`nmap 192.168.0.100/24 -excludefile c:\users\aerfa\Desktop\test.txt`

7.扫描某一目标地址的指定端口如：21，22，23，80 端口

如果不需要对目标主机进行全端口扫描，只想探测它是否开放了某一端口，那么使用-p参数指定端口号，将大大提升扫描速度。

`nmap 192.168.0.100 -p 21,22,23,80`

8.对目标地址进行路由跟踪

`nmap --traceroute 192.168.0.101`

9.扫描目标地址所在c段的在线状况

`nmap -sP 192.168.0.100/24`

10.目标地址的操作系统指纹识别

`nmap -O 192.168.0.105`

11. 目标地址提供的服务版本检测

    `map -sV 192.168.0.100`

12. 探测防火墙状态

    利用FIN扫描的方式探测防火墙的状

    `nmap -sF -T4 192.168.0.100`z

    FIN扫描用于识别端口是否关闭，收到RST回复说明该端口关闭，否则就是open或filtered状态

    

## 状态识别

——————常见的6种nmap端口状态及其含义

| 含义            | 状态                                                   |
| --------------- | ------------------------------------------------------ |
| open            | 开发的，表示应用程序正在监听该端口的连接，外部可以访问 |
| filtered        | 被过滤的，表示端口被防火墙或其它网络设备阻止，不能访问 |
| closed          | 关闭的，表示目标主未开启该端口                         |
| unfiltered      | 未被过滤的，表示nmap无法确定端口所处状态，需进一步探测 |
| open/filtered   | 开发的或被过滤的，Nmap不能识别                         |
| closed/filtered | 关闭的或被过滤的，Nmap不能识别                         |



## Nmap 脚本介绍

namp 的脚本默认存放在/xx/nmap/scripts文件夹下

Nmap 的脚本主要分为以下几类：

Auth:负责处理鉴权证书<绕过权限证书>的脚本

Broadcast：在局域网内探查更多服务的开启情况，如DHCP/DNS/SQLServer等。

Brute:针对常见的应用提供暴力破解方式，如HTTP/SMTP等。

Default:使用-sC或-A选项扫描时默认的脚本，提供基本的脚本扫描能力。

Discovery:对网络进行更多信息的收集，如SMB枚举，SNMP查询等。

Dos:用于进行拒绝服务攻击。

Exploit:利用第三方的数据库或资源，列如，进行whois解析。

Fuzzer：模糊测试脚本，发送异常的包到目标机，探测出潜在漏洞。

Intrusive:入侵性的脚本，此类脚本可能引发对方的IDS/IPS的记录或屏蔽。

Malware:探测目标机是否感染了病毒，并开启后门等信息。

Safe:此类与Intrusive相反，属于安全性脚本。

Version:负责增强服务与版本扫描功能的脚本。

Vuln:负责检查目标机是否有常见漏洞，

## 实列

1.鉴权扫描

nmap --script=auth 192.168.0.180

2.暴力破解

nmap --script=brute 192.168.0.180

3.常见漏洞扫描

nmap --script=vuln 192.168.0.180

4.应用服务扫描

nmap --script=realvnc-auth-bypass 192.168.0.180

5.探测局域网内更多服务开启情况

nmap -n -p 445 --script=broabcast 192.168.0.180

6.Whois 解析

nmap -script external baidu.com

## nmap扫描实列

了解nmap扫描的基本使用方式

了解简单扫描与全面扫描的区别

了解简单扫描与全面扫描的协议

cut命令参数：

**作用：截取文件部分显示，-d分隔符 -f指定段数 -c指定第几个字符；**
**显示passwd文档的前两段，截取：之前的1段；**
**cat /etc/passwd |head -2 |cut -d ":" -f 1**

列：`nmap Pn 192.168.0.1/24>test.txt`

`cat 1.txt | grep 192.168|cut -c 22-45`

